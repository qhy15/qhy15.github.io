---
layout:  post
title:  "xp+ubuntu双系统去ubuntu留xp"
date:  2009-02-25 12:45:43
categories:  other
tags:  [diskpart,ubuntu+windows双系统,磁盘分区]
---

我的本子：lenovo的ideapad，y430。

以前为了做操作系统实验，装了双系统。当初分了100g给ubuntu，现在觉得没有必要。决定了ubuntu，装个虚拟机得了。

首先，google方法，就是1、修改引导程序。2、格式化ubuntu下的分区。

第一步时，我不想进入dos下操作。于是，采用了如下方法：

	在Windows下，下载MbrFix，并解压；打开“命令提示符”，cd到MbrFix目录里，输入如下命令MbrFix /drive 0 fixmbr，在对话提示中输入y后确定。如无意外，这时你重启后可以看到不再有多系统的启动选择，而是直接进入了Windows。

第二步时，我使用了xp自带的磁盘管理。
xp自带的磁盘管理（控制面板-->管理工具-->计算机管理-->磁盘管理），能够看见ubuntu下的分区（我ubuntu分区：swap4g,根分区80多g，我不会分区- -！）。

在我删除了这两个分区，想重新建立分区时。问题来了。
`这两个分区无法合并和重新分配。`
google了原因：

	硬盘分区有三种，主磁盘分区、扩展磁盘分区、逻辑分区。
	一个硬盘可以有一个主分区，一个扩展分区，也可以只有一个主分区没有扩展分区。逻辑分区可以若干。
	主分区是硬盘的启动分区，他是独立的，也是硬盘的第一个分区，正常分的话就是C驱。
	分出主分区后，其余的部分可以分成扩展分区，一般是剩下的部分全部分成扩展分区，也可以不全分，那剩的部分就浪费了。
	但扩展分区是不能直接用的，他是以逻辑分区的方式来使用的，所以说扩展分区可分成若干逻辑分区。他们的关系是包含的关系，所有的逻辑分区都是扩展分区的一部分。

原swap分区为逻辑分区，原根分区为主分区。
也就是说，必须先把主分区转换为逻辑分区，再才能合并，重新分配。
使用xp自带的磁盘管理，无法做到这点。

网上普遍推荐
`PartitionMagic(硬盘分区魔术师) `

但是我安装后，运行出现错误

	Partition's drive letter cannot be identified

网上有的说是需要在dos下运行，有的说是sata硬盘不支持。

只好换了一个工具，
`磁盘工具Diskpart`

（之前我已经用xp的磁盘管理把原根目录 原swap分区创建为一个逻辑分区，一个主分区）

①输入“List partition”，查看分区。（假如那个逻辑分区为第4号分区，那个主分区为第5号分区）

②输入“Select partition 5”使第5分区，使该分区具有焦点属性。再输入“Delete partition”即可删除该分区。再输入“List partition”，查看分区。将第1、2两个“List partition”命令后的值进行比较，不难看出，原分区5确实已被删除了。

③输入“Select partition 4”使其具有焦点属性，再输入“Extend”，刚才被删除分区所空出来的未分配空间就能自动添加到第4分区中去。

这样就有了一个大的逻辑分区，接下来再用xp的磁盘管理，就能轻松将这个大分区，划分成小的分区了。

[更多dispart操作](http://511314xx.cn/2008/12/20/分区方案之diskpart/)